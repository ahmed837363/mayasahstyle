<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - ููุงุณู ุณุชุงูู</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/products.css">
</head>
<body data-app="dashboard">
    <header class="app-header">
        <div class="app-header__title">
            <span aria-hidden="true">๐ธ</span>
            <span class="app-header__title-text" data-i18n="headerBrand">ููุงุณุฉ ุจุฑู</span>
        </div>
        <div class="app-header__actions">
            <button class="icon-button language-toggle" type="button" id="languageToggle" aria-label="ุงูุชุจุฏูู ุฅูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ">English</button>
            <span class="badge" id="userBadge"></span>
            <button class="icon-button" id="logoutBtn" data-i18n="headerLogout">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
        </div>
    </header>

    <div class="app-shell">
        <main class="main-content">
            <section id="view-products" class="view-section is-active">
                <div class="section-header">
                    <h2 class="section-title" data-i18n="productsTitle">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h2>
                    <button class="primary-button" id="addProductBtn" data-i18n="addProduct">ุฅุถุงูุฉ ููุชุฌ</button>
                </div>
                <div class="products-toolbar">
                    <div class="products-search">
                        <input type="search" id="productsSearch" data-i18n-placeholder="searchPlaceholder" placeholder="ุงุจุญุซ ุนู ููุชุฌ ุจุงูุงุณู ุฃู SKU">
                    </div>
                    <div class="chip-toggle" id="categoryFilter">
                        <button type="button" class="is-active" data-category="all" data-i18n="category_all">ุงููู</button>
                        <button type="button" data-category="black" data-i18n="category_black">ุณูุฏุงุก</button>
                        <button type="button" data-category="color" data-i18n="category_color">ููููุฉ</button>
                        <button type="button" data-category="embroidery" data-i18n="category_embroidery">ูุทุฑุฒุฉ</button>
                        <button type="button" data-category="modern" data-i18n="category_modern">ุนุตุฑูุฉ</button>
                    </div>
                </div>
                <div class="products-grid" id="productsList"></div>
                <div class="empty-state" id="productsEmptyState">
                    <div class="empty-state__icon">๐</div>
                    <h3 class="empty-state__title" data-i18n="emptyTitle">ูุง ุชูุฌุฏ ููุชุฌุงุช ุจุนุฏ</h3>
                    <p class="empty-state__subtitle" data-i18n="emptySubtitle">ุงุจุฏุฃ ุจุฅุถุงูุฉ ููุชุฌุงุชู ุงูุฃููู ูุชุธูุฑ ูู ูุชุฌุฑู.</p>
                    <button class="primary-button" id="emptyAddBtn" data-i18n="emptyAdd">ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</button>
                </div>
            </section>

            <section id="view-orders" class="view-section">
                <div class="section-header">
                    <h2 class="section-title" data-i18n="ordersTitle">ุงูุทูุจุงุช</h2>
                </div>
                <div class="empty-state">
                    <div class="empty-state__icon">๐ฆ</div>
                    <h3 class="empty-state__title" data-i18n="ordersEmptyTitle">ูุชุงุจุนุฉ ุงูุทูุจุงุช ููุฏ ุงูุชุทููุฑ</h3>
                    <p class="empty-state__subtitle" data-i18n="ordersEmptySubtitle">ุณูุถูู ููุญุฉ ุชูุตูููุฉ ููุทูุจุงุช ูุฑูุจุงู. ููููู ุฑุจุท ูุฌููุนุฉ ุจูุงูุงุช ุงูุทูุจุงุช ุนุจุฑ Appwrite ูุงุณุชุนุฑุงุถูุง ููุง.</p>
                </div>
            </section>

            <section id="view-stats" class="view-section">
                <div class="section-header">
                    <h2 class="section-title" data-i18n="statsTitle">ูุธุฑุฉ ุนุงูุฉ</h2>
                </div>
                <div class="card-grid">
                    <article class="surface-card">
                        <div class="surface-card__header">
                            <h3 class="surface-card__title" data-i18n="statsSales">ุฅุฌูุงูู ุงููุจูุนุงุช (ุงูุดูุฑ)</h3>
                        </div>
                        <p class="surface-card__value" id="statSalesValue" data-amount="0">0 ุฑ.ุณ</p>
                    </article>
                    <article class="surface-card">
                        <div class="surface-card__header">
                            <h3 class="surface-card__title" data-i18n="statsActive">ุงูููุชุฌุงุช ุงููุดุทุฉ</h3>
                        </div>
                        <p class="surface-card__value" id="statActiveProducts">0</p>
                    </article>
                    <article class="surface-card">
                        <div class="surface-card__header">
                            <h3 class="surface-card__title" data-i18n="statsLow">ูุฎุฒูู ููุฎูุถ</h3>
                        </div>
                        <p class="surface-card__value" id="statLowStock">0</p>
                    </article>
                </div>
            </section>

            <section id="view-settings" class="view-section">
                <div class="section-header">
                    <h2 class="section-title" data-i18n="settingsTitle">ุงูุชุฎุตูุต</h2>
                </div>
                <article class="surface-card">
                    <h3 class="surface-card__title" data-i18n="settingsCardTitle">ุฃููุงู ุงููุงุฌูุฉ</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="primaryColor" data-i18n="settingsPrimary">ุงูููู ุงูุฑุฆูุณู</label>
                            <input type="color" id="primaryColor" value="#8a2d52">
                        </div>
                        <div class="form-field">
                            <label for="secondaryColor" data-i18n="settingsSecondary">ุงูููู ุงูุซุงููู</label>
                            <input type="color" id="secondaryColor" value="#c06c84">
                        </div>
                        <button type="button" class="secondary-button" id="resetTheme" data-i18n="settingsReset">ุฅุนุงุฏุฉ ุงูุถุจุท</button>
                    </div>
                </article>
            </section>
        </main>
    </div>

    <div class="toast" id="globalToast"></div>
    <div class="loading-overlay" id="globalLoader">
        <div class="loader"></div>
    </div>

    <nav class="bottom-nav">
        <button class="bottom-nav__button is-active" data-nav="products">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 4h-2l-3 7v2h2v7h14v-7h2v-2l-3-7h-2l1 3h-9l1-3zm0 5h10v9h-10v-9z"/></svg>
            <span data-i18n="nav_products">ุงูููุชุฌุงุช</span>
        </button>
        <button class="bottom-nav__button" data-nav="orders">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 4h-2v16h18v-16h-2v14h-14v-14zm4-2h6v2h-6v-2zm-4 4h14v2h-14v-2zm0 4h14v2h-14v-2zm0 4h10v2h-10v-2z"/></svg>
            <span data-i18n="nav_orders">ุงูุทูุจุงุช</span>
        </button>
        <button class="bottom-nav__button" data-nav="stats">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 19h18v2h-18v-2zm2-10h3v8h-3v-8zm6-4h3v12h-3v-12zm6 8h3v4h-3v-4z"/></svg>
            <span data-i18n="nav_stats">ุงูุฅุญุตุงุฆูุงุช</span>
        </button>
        <button class="bottom-nav__button" data-nav="settings">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 8c-2.209 0-4 1.791-4 4s1.791 4 4 4 4-1.791 4-4-1.791-4-4-4zm9 4c0-.661-.078-1.306-.223-1.924l2.115-1.635-1.5-2.598-2.49.996c-.499-.438-1.044-.82-1.633-1.135l-.377-2.632h-3l-.377 2.632c-.589.315-1.134.697-1.633 1.135l-2.49-.996-1.5 2.598 2.115 1.635c-.145.618-.223 1.263-.223 1.924s.078 1.306.223 1.924l-2.115 1.635 1.5 2.598 2.49-.996c.499.438 1.044.82 1.633 1.135l.377 2.632h3l.377-2.632c.589-.315 1.134-.697 1.633-1.135l2.49.996 1.5-2.598-2.115-1.635c.145-.618.223-1.263.223-1.924z"/></svg>
            <span data-i18n="nav_settings">ุงูุฅุนุฏุงุฏุงุช</span>
        </button>
    </nav>

    <div class="product-editor" id="productEditor">
        <div class="product-editor__panel">
            <div class="product-editor__header">
                <h3 class="product-editor__title" id="productEditorTitle"></h3>
                <button class="close-button" type="button" data-close-editor>&times;</button>
            </div>
            <form id="productEditorForm" class="form-grid">
                <div class="image-upload">
                    <label for="productImage" data-i18n="editorImageLabel">ุตูุฑุฉ ุงูููุชุฌ</label>
                    <div class="image-upload__preview" id="productImagePreview"><span data-i18n="editorNoImage">ูู ูุชู ุงุฎุชูุงุฑ ุตูุฑุฉ</span></div>
                    <input type="file" id="productImage" accept="image/*">
                </div>
                <div class="form-field">
                    <label for="name_ar" data-i18n="editorNameAr">ุงุณู ุงูููุชุฌ (ุนุฑุจู)</label>
                    <input type="text" name="name_ar" id="name_ar" required>
                </div>
                <div class="form-field">
                    <label for="name_en" data-i18n="editorNameEn">ุงุณู ุงูููุชุฌ (English)</label>
                    <input type="text" name="name_en" id="name_en">
                </div>
                <div class="form-field">
                    <label for="sku" data-i18n="editorSku">ุฑูุฒ ุงูููุชุฌ (SKU)</label>
                    <input type="text" name="sku" id="sku">
                </div>
                <div class="form-field">
                    <label for="price" data-i18n="editorPrice">ุงูุณุนุฑ</label>
                    <input type="number" step="0.01" min="0" name="price" id="price" required>
                </div>
                <div class="form-field">
                    <label for="discount" data-i18n="editorDiscount">ูุณุจุฉ ุงูุฎุตู %</label>
                    <input type="number" step="0.01" min="0" name="discount" id="discount">
                </div>
                <div class="form-field">
                    <label for="current_stock" data-i18n="editorCurrentStock">ุงููุฎุฒูู ุงูุญุงูู</label>
                    <input type="number" min="0" name="current_stock" id="current_stock" required>
                </div>
                <div class="form-field">
                    <label for="initial_stock" data-i18n="editorInitialStock">ุงููุฎุฒูู ุงูุงุจุชุฏุงุฆู</label>
                    <input type="number" min="0" name="initial_stock" id="initial_stock">
                </div>
                <div class="form-field">
                    <label for="category" data-i18n="editorCategory">ุงูุชุตููู</label>
                    <select name="category" id="category">
                        <option value="black" data-i18n="categoryOption_black">ุณูุฏุงุก</option>
                        <option value="color" data-i18n="categoryOption_color">ููููุฉ</option>
                        <option value="embroidery" data-i18n="categoryOption_embroidery">ูุทุฑุฒุฉ</option>
                        <option value="modern" data-i18n="categoryOption_modern">ุนุตุฑูุฉ</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="badge" data-i18n="editorBadge">ุงูุดุงุฑุฉ</label>
                    <input type="text" name="badge" id="badge" placeholder="ูุซุงู: new" data-i18n-placeholder="editorBadgePlaceholder">
                </div>
                <div class="form-field">
                    <label for="description_ar" data-i18n="editorDescriptionAr">ุงููุตู (ุนุฑุจู)</label>
                    <textarea name="description_ar" id="description_ar" rows="3"></textarea>
                </div>
                <div class="form-field">
                    <label for="description_en" data-i18n="editorDescriptionEn">ุงููุตู (English)</label>
                    <textarea name="description_en" id="description_en" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="secondary-button" data-close-editor data-i18n="editorCancel">ุฅูุบุงุก</button>
                    <button type="submit" class="primary-button" data-i18n="editorSave">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.0"></script>
    <script src="config.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/appwrite-client.js"></script>
    <script src="js/products.js"></script>
    <script src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js').catch(() => {});
            });
        }
        document.getElementById('emptyAddBtn')?.addEventListener('click', () => {
            document.getElementById('addProductBtn')?.click();
        });
    </script>
</body>
</html>
